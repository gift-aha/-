<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ˜æœé‚£äº›äº‹å„¿ - å†å²è„‰ç»œæ¢³ç†</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #8B0000;
            --secondary-color: #D4AF37;
            --dark-color: #2C1B11;
            --light-color: #F5F5DC;
            --text-color: #333;
            --bg-color: #FFF8F0;
            --card-bg: #FFFFFF;
            --border-color: #D4C8B5;
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', 'SimSun', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23FFF8F0"/><path d="M0,0 L100,100 M100,0 L0,100" stroke="%23D4C8B5" stroke-width="0.5" opacity="0.3"/></svg>');
            background-attachment: fixed;
        }
        
        header {
            background: linear-gradient(135deg, var(--dark-color) 0%, var(--primary-color) 100%);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M40,20 L160,20 L160,180 L40,180 Z" fill="none" stroke="%23D4AF37" stroke-width="2" stroke-dasharray="10,5"/><circle cx="100" cy="100" r="60" fill="none" stroke="%23D4AF37" stroke-width="2"/></svg>');
            background-size: 400px;
            opacity: 0.15;
            z-index: 0;
        }
        
        header h1 {
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            z-index: 1;
            letter-spacing: 3px;
        }
        
        header p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            color: var(--secondary-color);
            font-weight: bold;
        }
        
        nav {
            background-color: var(--dark-color);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .nav-container {
            display: flex;
            justify-content: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .nav-tabs {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .nav-tabs li {
            position: relative;
        }
        
        .nav-tabs a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            z-index: 10;
        }
        
        .nav-tabs a:hover, .nav-tabs a.active {
            background-color: var(--primary-color);
        }
        
        .nav-tabs a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--secondary-color);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s ease;
            z-index: -1;
        }
        
        .nav-tabs a:hover::after, .nav-tabs a.active::after {
            transform: scaleX(1);
            transform-origin: left;
        }
        
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        .section {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }
        
        .section-title {
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: var(--secondary-color);
        }
        
        /* çš‡å¸ä¸–ç³»æ ·å¼ */
        .emperors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .emperor-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .emperor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .emperor-portrait {
            height: 280px;
            background: linear-gradient(45deg, var(--primary-color), var(--dark-color));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><circle cx="100" cy="100" r="80" fill="none" stroke="%23D4AF37" stroke-width="2"/><path d="M60,100 Q100,60 140,100 T60,100" fill="none" stroke="%23D4AF37" stroke-width="1"/></svg>');
            background-size: 100%;
        }
        
        .emperor-portrait img {
            width: 85%;
            height: 85%;
            object-fit: contain;
            border: 3px solid var(--secondary-color);
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .emperor-info {
            padding: 15px;
        }
        
        .emperor-name {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .reign-period {
            color: var(--secondary-color);
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
        }
        
        .emperor-bio {
            font-size: 0.95rem;
            color: #555;
            height: 80px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .read-more {
            display: inline-block;
            color: var(--primary-color);
            font-weight: bold;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .read-more:hover {
            text-decoration: underline;
        }
        
        /* ä¹¦ç±å†…å®¹æ ·å¼ */
        .books-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .book-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .book-cover {
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--dark-color) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3.5rem;
            font-weight: bold;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect x="30" y="30" width="140" height="140" fill="none" stroke="%23D4AF37" stroke-width="2"/><path d="M50,100 L150,100 M100,50 L100,150" stroke="%23D4AF37" stroke-width="1" stroke-dasharray="5,5"/></svg>');
            background-size: 60px;
        }
        
        .book-cover::after {
            content: "ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹";
            position: absolute;
            bottom: 10px;
            font-size: 0.9rem;
            letter-spacing: 3px;
        }
        
        .book-cover span {
            position: relative;
            z-index: 1;
        }
        
        .book-info {
            padding: 20px;
        }
        
        .book-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .book-period {
            color: var(--secondary-color);
            font-weight: bold;
            margin-bottom: 12px;
            display: block;
        }
        
        .book-content {
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.7;
        }
        
        .key-figures {
            margin-top: 15px;
        }
        
        .key-figures h4 {
            font-size: 1.1rem;
            color: var(--dark-color);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .figures-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .figure-tag {
            background-color: #e9ecef;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            color: var(--primary-color);
        }
        
        /* äººç‰©å…³ç³»å›¾æ ·å¼ */
        .relationship-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
        }
        
        #relationship-chart {
            width: 100%;
            height: 500px;
            background-color: var(--light-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            margin-top: 20px;
            box-shadow: var(--shadow);
        }
        
        .person-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            box-shadow: var(--shadow);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .person-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 15px;
        }
        
        .person-avatar {
            width: 100px;
            height: 100px;
            background: linear-gradient(45deg, var(--primary-color), var(--dark-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            margin-right: 25px;
            flex-shrink: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="none" stroke="%23D4AF37" stroke-width="1"/></svg>');
            background-size: 80%;
        }
        
        .person-name {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .person-title {
            color: var(--secondary-color);
            font-weight: bold;
            margin-top: 5px;
        }
        
        .person-bio {
            line-height: 1.8;
            margin-bottom: 20px;
        }
        
        .key-events {
            margin-top: 20px;
        }
        
        .key-events h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .event-item {
            background-color: #f8f9fa;
            padding: 12px 15px;
            border-left: 4px solid var(--secondary-color);
            margin-bottom: 10px;
            border-radius: 0 4px 4px 0;
        }
        
        /* æˆ˜å½¹æ¨æ¼”æ ·å¼ */
        .battle-container {
            margin-top: 30px;
        }
        
        .battle-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .battle-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .battle-btn:hover {
            background-color: #a52a2a;
            transform: translateY(-2px);
        }
        
        .battle-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .battle-map-container {
            background-color: var(--light-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }
        
        .battle-map {
            width: 100%;
            height: 450px;
            background: linear-gradient(to bottom, #e6d3a7 0%, #c1b18a 100%);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><path d="M50,250 L350,250 L350,50 L50,50 Z" fill="none" stroke="%238B4513" stroke-width="2"/><path d="M150,150 L250,150 M200,100 L200,200" stroke="%238B4513" stroke-width="1" stroke-dasharray="5,5"/><circle cx="100" cy="200" r="15" fill="%23D4AF37" opacity="0.7"/><circle cx="300" cy="100" r="15" fill="%234a6b3f" opacity="0.7"/><text x="100" y="205" font-family="SimSun" font-size="12" fill="%23333" text-anchor="middle">å—äº¬</text><text x="300" y="105" font-family="SimSun" font-size="12" fill="%23333" text-anchor="middle">åŒ—å¹³</text></svg>');
            background-size: 100%;
        }
        
        .army {
            position: absolute;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            z-index: 10;
            transition: all 0.8s ease;
        }
        
        .ming-army {
            background-color: var(--primary-color);
        }
        
        .enemy-army {
            background-color: #4a6b3f;
        }
        
        .battle-label {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }
        
        .battle-step {
            background-color: var(--card-bg);
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            box-shadow: var(--shadow);
        }
        
        .battle-step h4 {
            color: var(--primary-color);
            margin-bottom: 8px;
        }
        
        /* æ£€ç´¢åŠŸèƒ½æ ·å¼ */
        .search-container {
            max-width: 700px;
            margin: 30px auto;
            position: relative;
        }
        
        .search-box {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--border-color);
            border-radius: 50px;
            font-size: 1.1rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .search-box:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(139, 0, 0, 0.2);
        }
        
        .search-results {
            margin-top: 30px;
        }
        
        .result-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .result-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .result-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .result-type {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.85rem;
            margin-right: 10px;
        }
        
        .result-type.emperor {
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        
        .result-type.battle {
            background-color: #4a6b3f;
            color: white;
        }
        
        .result-type.book {
            background-color: #6a4c93;
            color: white;
        }
        
        .result-content {
            line-height: 1.7;
        }
        
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 40px auto;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 15px;
            width: 4px;
            background-color: var(--primary-color);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -28px;
            top: 5px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            border: 3px solid var(--primary-color);
        }
        
        .timeline-date {
            position: absolute;
            left: -120px;
            top: 0;
            width: 80px;
            text-align: right;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .timeline-content {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            box-shadow: var(--shadow);
        }
        
        .timeline-title {
            font-weight: bold;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        /* é¡µè„šæ ·å¼ */
        footer {
            background: linear-gradient(135deg, var(--dark-color) 0%, var(--primary-color) 100%);
            color: white;
            text-align: center;
            padding: 25px 15px;
            margin-top: 30px;
            font-size: 0.95rem;
        }
        
        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: white;
            text-decoration: underline;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.5rem;
            }
            
            header p {
                font-size: 1.1rem;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
            }
            
            .nav-tabs a {
                padding: 12px 15px;
                font-size: 0.95rem;
            }
            
            .section {
                padding: 1.5rem;
            }
            
            .emperors-grid, .books-container {
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            }
            
            .battle-map {
                height: 350px;
            }
            
            .timeline::before {
                left: 10px;
            }
            
            .timeline-date {
                left: -100px;
                font-size: 0.9rem;
            }
            
            .timeline-item::before {
                left: -23px;
            }
        }
        
        @media (max-width: 480px) {
            header h1 {
                font-size: 2rem;
            }
            
            .nav-tabs a {
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .section-title {
                font-size: 1.7rem;
            }
            
            .emperor-portrait {
                height: 220px;
                font-size: 3rem;
            }
            
            .book-cover {
                height: 170px;
                font-size: 2.5rem;
            }
            
            .battle-map {
                height: 280px;
            }
            
            .timeline {
                padding-left: 20px;
                margin: 25px auto;
            }
            
            .timeline::before {
                left: 8px;
            }
            
            .timeline-date {
                left: -80px;
                font-size: 0.85rem;
            }
            
            .timeline-item::before {
                left: -21px;
            }
        }
        
        /* çš‡å¸è¯¦ç»†ä¿¡æ¯æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: modalopen 0.4s;
        }
        
        @keyframes modalopen {
            from {opacity: 0; transform: translateY(-50px);}
            to {opacity: 1; transform: translateY(0);}
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 1.5rem;
            color: var(--primary-color);
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
        }
        
        .close-modal:hover {
            color: var(--dark-color);
            transform: scale(1.2);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--dark-color) 0%, var(--primary-color) 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 10px 10px 0 0;
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .emperor-full-name {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .emperor-reign {
            font-size: 1.3rem;
            color: var(--secondary-color);
            margin-bottom: 15px;
            display: block;
        }
        
        .emperor-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .detail-item {
            margin-bottom: 15px;
        }
        
        .detail-label {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .emperor-full-bio {
            margin-top: 25px;
            line-height: 1.8;
        }
        
        /* æˆ˜å½¹æ­¥éª¤æŒ‡ç¤ºå™¨ */
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .step-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: #ccc;
            transition: var(--transition);
        }
        
        .step-dot.active {
            background-color: var(--primary-color);
            transform: scale(1.3);
        }
        
        .step-dot.completed {
            background-color: var(--secondary-color);
        }
        mark.search-highlight {
            background: linear-gradient(120deg, rgba(255,215,0,0.4) 0%, rgba(255,193,7,0.6) 100%);
            padding: 0 2px;
            border-radius: 2px;
            font-weight: 600;
            box-shadow: 0 0 0 1px rgba(255,193,7,0.5);
        }
        /* å¡ç‰‡æ‚¬åœåŠ¨æ•ˆï¼ˆæ‰€æœ‰å¡ç‰‡ç»Ÿä¸€ï¼‰ */
        .book-card, .emperor-card, .person-card, .result-card {
            transition: transform 0.35s cubic-bezier(0.175, 0.885, 0.32, 1.275), 
                        box-shadow 0.4s ease;
        }
        .book-card:hover, .emperor-card:hover, .person-card:hover, .result-card:hover {
            transform: translateY(-6px) scale(1.01);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.18) !important;
            z-index: 10;
        }
            
        /* è¿”å›é¡¶éƒ¨æŒ‰é’®å¢å¼º */
        .back-to-top {
            background: linear-gradient(135deg, var(--primary-color), #1a3a6c);
            animation: pulse 2s infinite;
        }
        .back-to-top:hover {
            animation: none;
            transform: translateY(-5px) scale(1.1);
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(26, 58, 108, 0.4); }
            70% { box-shadow: 0 0 0 12px rgba(26, 58, 108, 0); }
            100% { box-shadow: 0 0 0 0 rgba(26, 58, 108, 0); }
        }
            
        /* äººç‰©å…³ç³»èŠ‚ç‚¹ä¼˜åŒ– */
        .relationship-node {
            transition: all 0.3s ease !important;
            position: relative;
            z-index: 2;
        }
        .relationship-node:hover {
            transform: scale(1.15) translateY(-3px) !important;
            z-index: 100 !important;
            box-shadow: 0 5px 25px rgba(0,0,0,0.25) !important;
        }
    </style>
</head>
<body>
    <header>
        <h1>æ˜æœé‚£äº›äº‹å„¿</h1>
        <p>ä¸€éƒ¨è½»æ¾å¹½é»˜çš„å†å²è¯»ç‰©ï¼Œå¸¦ä½ èµ°è¿›<span class="subtitle">å¤§æ˜ç‹æœ</span>çš„å…´è¡°è£è¾±</p>
    </header>
    
    <nav>
        <div class="nav-container">
            <ul class="nav-tabs">
                <li><a href="#overview" class="active"><i class="fas fa-home"></i> æ¦‚è§ˆ</a></li>
                <li><a href="#books"><i class="fas fa-book"></i> ä¹¦ç±å†…å®¹</a></li>
                <li><a href="#emperors"><i class="fas fa-crown"></i> çš‡å¸ä¸–ç³»</a></li>
                <li><a href="#figures"><i class="fas fa-user-friends"></i> é£äº‘äººç‰©</a></li>
                <li><a href="#battles"><i class="fas fa-crosshairs"></i> æˆ˜å½¹æ¨æ¼”</a></li>
                <li><a href="#search"><i class="fas fa-search"></i> äº‹ä»¶æ£€ç´¢</a></li>
            </ul>
        </div>
    </nav>
    
    <div class="container">
        <section id="overview" class="section">
            <h2 class="section-title"><i class="fas fa-chart-line"></i> æ˜æœå†å²è„‰ç»œ</h2>
            <p>ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹æ˜¯å½“å¹´æ˜æœˆåˆ›ä½œçš„å†å²å°è¯´ï¼Œä»¥å¹½é»˜é£è¶£çš„ç¬”æ³•è®²è¿°äº†ä»1344å¹´åˆ°1644å¹´è¿™ä¸‰ç™¾å¹´é—´æ˜æœçš„å†å²ã€‚æœ¬ä¹¦å…±ä¸ƒéƒ¨ï¼Œä»¥å²æ–™ä¸ºåŸºç¡€ï¼Œä»¥å¹´ä»£å’Œå…·ä½“äººç‰©ä¸ºä¸»çº¿ï¼ŒåŒæ—¶åŠ å…¥äº†å°è¯´çš„ç¬”æ³•ï¼Œå¯¹æ˜æœåä¸ƒå¸å’Œå…¶ä»–ç‹å…¬æƒè´µä»¥åŠå°äººç‰©çš„å‘½è¿è¿›è¡Œäº†å…¨æ™¯å±•ç¤ºã€‚</p>
            
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">1344å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">æœ±å…ƒç’‹å‡ºç”Ÿ</div>
                        <p>æœ±å…ƒç’‹å‡ºç”Ÿäºæ¿ å·é’Ÿç¦»ï¼ˆä»Šå®‰å¾½å‡¤é˜³ï¼‰ä¸€ä¸ªè´«è‹¦å†œæ°‘å®¶åº­ï¼Œå¹¼åæœ±é‡å…«ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1368å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">æ˜æœå»ºç«‹</div>
                        <p>æœ±å…ƒç’‹åœ¨åº”å¤©åºœï¼ˆä»Šå—äº¬ï¼‰ç§°å¸ï¼Œå›½å·å¤§æ˜ï¼Œå¹´å·æ´ªæ­¦ï¼Œå»ºç«‹æ˜æœã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1402å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">é–éš¾ä¹‹å½¹</div>
                        <p>ç‡•ç‹æœ±æ££æ”»å…¥å—äº¬ï¼Œå»ºæ–‡å¸å¤±è¸ªï¼Œæœ±æ££å³ä½ä¸ºæ˜æˆç¥–ï¼Œå¼€å¯æ°¸ä¹ç››ä¸–ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1421å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">è¿éƒ½åŒ—äº¬</div>
                        <p>æ˜æˆç¥–æœ±æ££æ­£å¼è¿éƒ½åŒ—äº¬ï¼Œå—äº¬ä½œä¸ºç•™éƒ½ï¼Œå½¢æˆä¸¤äº¬åˆ¶ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1449å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">åœŸæœ¨å ¡ä¹‹å˜</div>
                        <p>æ˜è‹±å®—æœ±ç¥é•‡äº²å¾ç“¦å‰Œè¢«ä¿˜ï¼Œæ˜æœç²¾é”æŸå¤±æƒ¨é‡ï¼Œäº¬åŸå±åœ¨æ—¦å¤•ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1573-1620å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">ä¸‡å†ä¸­å…´</div>
                        <p>å¼ å±…æ­£æ”¹é©å¸¦æ¥æ˜æœæœ€åçš„è¾‰ç…Œï¼Œä½†ä¸‡å†åæœŸæ€ æ”¿å¯¼è‡´å›½åŠ›è¡°é€€ã€‚</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">1644å¹´</div>
                    <div class="timeline-content">
                        <div class="timeline-title">æ˜æœç­äº¡</div>
                        <p>æè‡ªæˆæ”»å…¥åŒ—äº¬ï¼Œå´‡ç¥¯å¸è‡ªç¼¢äºç…¤å±±ï¼Œæ˜æœç­äº¡ï¼Œæ¸…å†›å…¥å…³ã€‚</p>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="books" class="section">
            <h2 class="section-title"><i class="fas fa-book-open"></i> ä¹¦ç±å†…å®¹æ¢³ç†</h2>
            <p>ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹å…±ä¸ƒéƒ¨ï¼Œå…¨é¢è®²è¿°äº†æ˜æœ276å¹´çš„å†å²ã€‚ä»¥ä¸‹æ˜¯å„éƒ¨ä¸»è¦å†…å®¹åŠæ¶‰åŠçš„é‡è¦äººç‰©å’Œäº‹ä»¶ï¼š</p>
            
            <div class="books-container">
                <div class="book-card">
                    <div class="book-cover"><span>å£¹</span></div>
                    <div class="book-info">
                        <div class="book-title">æ´ªæ­¦å¤§å¸</div>
                        <span class="book-period">1344å¹´ - 1398å¹´</span>
                        <p class="book-content">è®²è¿°æœ±å…ƒç’‹ä»æ”¾ç‰›å¨ƒåˆ°å¼€å›½çš‡å¸çš„ä¼ å¥‡å†ç¨‹ï¼ŒåŒ…æ‹¬èµ·ä¹‰ã€ç»Ÿä¸€æˆ˜äº‰ã€å»ºç«‹æ˜æœã€æ´ªæ­¦ä¹‹æ²»åŠæ™šå¹´è¯›æ€åŠŸè‡£ç­‰äº‹ä»¶ã€‚</p>
                        <div class="key-figures">
                            <h4><i class="fas fa-user"></i> æ ¸å¿ƒäººç‰©</h4>
                            <div class="figures-list">
                                <span class="figure-tag">æœ±å…ƒç’‹</span>
                                <span class="figure-tag">å¾è¾¾</span>
                                <span class="figure-tag">å¸¸é‡æ˜¥</span>
                                <span class="figure-tag">åˆ˜ä¼¯æ¸©</span>
                                <span class="figure-tag">é©¬çš‡å</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="book-card">
                    <div class="book-cover"><span>è´°</span></div>
                    <div class="book-info">
                        <div class="book-title">ä¸‡å›½æ¥æœ</div>
                        <span class="book-period">1398å¹´ - 1424å¹´</span>
                        <p class="book-content">èšç„¦é–éš¾ä¹‹å½¹ã€æœ±æ££å¤ºä½ã€æ°¸ä¹ç››ä¸–ã€éƒ‘å’Œä¸‹è¥¿æ´‹ã€è¿éƒ½åŒ—äº¬ç­‰é‡å¤§äº‹ä»¶ï¼Œå±•ç°æ˜æœé¼ç››æ—¶æœŸçš„æ¢å¼˜æ°”è±¡ã€‚</p>
                        <div class="key-figures">
                            <h4><i class="fas fa-user"></i> æ ¸å¿ƒäººç‰©</h4>
                            <div class="figures-list">
                                <span class="figure-tag">æœ±æ££</span>
                                <span class="figure-tag">æœ±å…ç‚†</span>
                                <span class="figure-tag">å§šå¹¿å­</span>
                                <span class="figure-tag">éƒ‘å’Œ</span>
                                <span class="figure-tag">è§£ç¼™</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="book-card">
                    <div class="book-cover"><span>å</span></div>
                    <div class="book-info">
                        <div class="book-title">å¦–å­½å®«å»·</div>
                        <span class="book-period">1424å¹´ - 1464å¹´</span>
                        <p class="book-content">è®²è¿°ä»å®£ä¹‹æ²»çš„çŸ­æš‚è¾‰ç…Œï¼ŒåœŸæœ¨å ¡ä¹‹å˜çš„æƒ¨ç—›æ•™è®­ï¼Œäºè°¦ä¿å«åŒ—äº¬çš„å£®ä¸¾ï¼Œä»¥åŠå¤ºé—¨ä¹‹å˜ç­‰å®«å»·æ–—äº‰ã€‚</p>
                        <div class="key-figures">
                            <h4><i class="fas fa-user"></i> æ ¸å¿ƒäººç‰©</h4>
                            <div class="figures-list">
                                <span class="figure-tag">æœ±ç»åŸº</span>
                                <span class="figure-tag">æœ±ç¥é•‡</span>
                                <span class="figure-tag">äºè°¦</span>
                                <span class="figure-tag">ç‹æŒ¯</span>
                                <span class="figure-tag">æœ±ç¥é’°</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 25px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border: 1px dashed var(--border-color);">
                <p>ğŸ“š <strong>å®Œæ•´ä¸ƒéƒ¨å†…å®¹ï¼š</strong> æ´ªæ­¦å¤§å¸ â†’ ä¸‡å›½æ¥æœ â†’ å¦–å­½å®«å»· â†’ ç²‰é¥°å¤ªå¹³ â†’ å¸å›½é£˜æ‘‡ â†’ æ—¥æš®è¥¿å±± â†’ å¤§ç»“å±€</p>
                <p style="margin-top: 8px; color: var(--primary-color); font-weight: bold;">æ¶µç›–æ˜æœ276å¹´å†å²ï¼Œ17ä½çš‡å¸ï¼Œæ•°ç™¾ä½å†å²äººç‰©</p>
            </div>
        </section>
        
        <section id="emperors" class="section">
            <h2 class="section-title"><i class="fas fa-crown"></i> æ˜æœçš‡å¸ä¸–ç³»</h2>
            <p>æ˜æœå…±åå…­ä½çš‡å¸ï¼ˆå»ºæ–‡å¸æœªè¢«æ‰¿è®¤ï¼Œæ™¯æ³°å¸åè¢«å¤è¾Ÿï¼‰ï¼Œä»¥ä¸‹ä¸ºå®Œæ•´ä¸–ç³»åŠç®€ä»‹ã€‚ç‚¹å‡»çš‡å¸å¡ç‰‡æŸ¥çœ‹è¯¦ç»†ç”Ÿå¹³ã€‚</p>
            
            <div class="emperors-grid">
                <div class="emperor-card" onclick="openEmperorModal('æœ±å…ƒç’‹', 'æ˜å¤ªç¥–', '1368-1398', 'æ´ªæ­¦', 'æ˜æœå¼€å›½çš‡å¸ï¼Œå¹´å·æ´ªæ­¦ã€‚å‡ºèº«è´«å†œï¼Œ25å²å‚åŠ éƒ­å­å…´èµ·ä¹‰å†›ï¼Œåé€æ­¥ç»Ÿä¸€å…¨å›½ã€‚åœ¨ä½æœŸé—´å®è¡Œä¼‘å…»ç”Ÿæ¯æ”¿ç­–ï¼Œæ¢å¤ç¤¾ä¼šç”Ÿäº§ï¼Œå²ç§°æ´ªæ­¦ä¹‹æ²»ã€‚æ™šå¹´å¤§æ€åŠŸè‡£ï¼Œä¸ºå­å­™é“ºè·¯ã€‚', 'é©±é€èƒ¡è™ï¼Œæ¢å¤ä¸­åï¼Œç«‹çº²é™ˆçºªï¼Œæ•‘æµæ–¯æ°‘', '1328-1398', 'å®‰å¾½å‡¤é˜³', 'é©¬çš‡å', 'è¯›æ€èƒ¡æƒŸåº¸ã€è“ç‰ç­‰åŠŸè‡£ï¼Œè®¾ç«‹é”¦è¡£å«')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±å…ƒç’‹</div>
                        <span class="reign-period">æ´ªæ­¦ (1368-1398)</span>
                        <p class="emperor-bio">æ˜æœå¼€å›½çš‡å¸ï¼Œä»ä¹ä¸åˆ°çš‡å¸çš„ä¼ å¥‡ã€‚å»ºç«‹æ˜æœåæ¨è¡Œä¼‘å…»ç”Ÿæ¯æ”¿ç­–ï¼Œæ¢å¤ç¤¾ä¼šç»æµï¼Œä½†æ™šå¹´å¤§æ€åŠŸè‡£ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
                
                <div class="emperor-card" onclick="openEmperorModal('æœ±æ££', 'æ˜æˆç¥–', '1402-1424', 'æ°¸ä¹', 'æœ±å…ƒç’‹ç¬¬å››å­ï¼Œåˆå°ç‡•ç‹ã€‚å‘åŠ¨é–éš¾ä¹‹å½¹å¤ºå–çš‡ä½ï¼Œå¹´å·æ°¸ä¹ã€‚åœ¨ä½æœŸé—´è¿éƒ½åŒ—äº¬ï¼Œæ´¾éƒ‘å’Œä¸‹è¥¿æ´‹ï¼Œç¼–çº‚ã€Šæ°¸ä¹å¤§å…¸ã€‹ï¼Œäº”å¾è’™å¤ï¼Œå¼€åˆ›æ°¸ä¹ç››ä¸–ã€‚', 'å¤©å‘½æœ‰å½’ï¼Œæœ•å½“ä¸ºå¤©ä¸‹ä¸»', '1360-1424', 'å—äº¬ï¼ˆç”Ÿäºï¼‰', 'å¾çš‡å', 'è¿éƒ½åŒ—äº¬ã€éƒ‘å’Œä¸‹è¥¿æ´‹ã€äº”å¾è’™å¤')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±æ££</div>
                        <span class="reign-period">æ°¸ä¹ (1402-1424)</span>
                        <p class="emperor-bio">é€šè¿‡é–éš¾ä¹‹å½¹å¤ºå–çš‡ä½ï¼Œå¼€åˆ›æ°¸ä¹ç››ä¸–ã€‚è¿éƒ½åŒ—äº¬ï¼Œæ´¾éƒ‘å’Œä¸‹è¥¿æ´‹ï¼Œç¼–çº‚ã€Šæ°¸ä¹å¤§å…¸ã€‹ï¼Œæ˜¯æ˜æœæœ€å…·å½±å“åŠ›çš„çš‡å¸ä¹‹ä¸€ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
                
                <div class="emperor-card" onclick="openEmperorModal('æœ±ç»åŸº', 'æ˜å®£å®—', '1425-1435', 'å®£å¾·', 'æœ±é«˜ç‚½é•¿å­ï¼Œå¹¼å¹´æ·±å¾—ç¥–çˆ¶æœ±æ££å–œçˆ±ã€‚åœ¨ä½æœŸé—´æ”¿æ²»æ¸…æ˜ï¼Œç™¾å§“å®‰å±…ä¹ä¸šï¼Œä¸çˆ¶äº²çš„ç»Ÿæ²»æ—¶æœŸåˆç§°â€œä»å®£ä¹‹æ²»â€ã€‚æ“…é•¿ä¹¦ç”»ï¼Œæœ‰â€œå®£å¾·ç‚‰â€ä¼ ä¸–ã€‚', 'æœ•æ‰¿å¤©å‘½ï¼ŒæŠšè‚²ä¸‡æ°‘', '1399-1435', 'åŒ—å¹³', 'å­™çš‡å', 'å¹³å®šæ±‰ç‹æœ±é«˜ç…¦å›ä¹±ï¼Œä¼‘å…»ç”Ÿæ¯')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±ç»åŸº</div>
                        <span class="reign-period">å®£å¾· (1425-1435)</span>
                        <p class="emperor-bio">ä¸å…¶çˆ¶æœ±é«˜ç‚½å…±åˆ›"ä»å®£ä¹‹æ²»"ï¼Œæ˜æœå›½åŠ›è¾¾åˆ°é¼ç››ã€‚æ“…é•¿ä¹¦ç”»ï¼Œæ”¿æ²»æ¸…æ˜ï¼Œä½†ä¸ºåä¸–åŸ‹ä¸‹å®¦å®˜ä¸“æƒéšæ‚£ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
                
                <div class="emperor-card" onclick="openEmperorModal('æœ±ç¥é•‡', 'æ˜è‹±å®—', '1435-1449, 1457-1464', 'æ­£ç»Ÿ/å¤©é¡º', '9å²å³ä½ï¼Œå‰æœŸç”±"ä¸‰æ¨"è¾…æ”¿ã€‚åå® ä¿¡å®¦å®˜ç‹æŒ¯å¯¼è‡´åœŸæœ¨å ¡ä¹‹å˜è¢«ä¿˜ã€‚è¢«æ”¾å›åå‘åŠ¨å¤ºé—¨ä¹‹å˜å¤è¾Ÿï¼Œå¤„æ­»äºè°¦ã€‚æ˜¯æ˜æœå”¯ä¸€ä½¿ç”¨ä¸¤ä¸ªå¹´å·çš„çš‡å¸ã€‚', 'å¤©å‘½é¡å¸¸ï¼ŒæƒŸå¾·æ˜¯è¾…', '1427-1464', 'åŒ—äº¬', 'é’±çš‡å', 'åœŸæœ¨å ¡ä¹‹å˜ã€å¤ºé—¨ä¹‹å˜ã€å¤„æ­»äºè°¦')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±ç¥é•‡</div>
                        <span class="reign-period">æ­£ç»Ÿ/å¤©é¡º (1435-1449, 1457-1464)</span>
                        <p class="emperor-bio">ç»å†è¢«ä¿˜ã€è½¯ç¦ã€å¤è¾Ÿçš„ä¼ å¥‡çš‡å¸ã€‚åœŸæœ¨å ¡ä¹‹å˜å¯¼è‡´æ˜æœç²¾é”å°½å¤±ï¼Œå¤è¾Ÿåå¤„æ­»åŠŸè‡£äºè°¦ï¼Œä¸€ç”Ÿå……æ»¡æˆå‰§æ€§ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
                
                <div class="emperor-card" onclick="openEmperorModal('æœ±åšç†œ', 'æ˜ä¸–å®—', '1521-1566', 'å˜‰é–', 'ä»¥è—©ç‹èº«ä»½ç»§ä½ï¼Œé€šè¿‡å¤§ç¤¼è®®äº‹ä»¶å¼ºåŒ–çš‡æƒã€‚å‰æœŸå‹¤æ”¿æœ‰ä¸ºï¼ŒåæœŸæ²‰è¿·é“æ•™ï¼ŒäºŒåå¤šå¹´ä¸ä¸Šæœã€‚ä¸¥åµ©ä¸“æƒï¼Œå€­å¯‡è‚†è™ï¼Œä½†æ˜æœæ ¹åŸºæœªåŠ¨æ‘‡ã€‚', 'æœ•ä¹ƒçœŸå‘½å¤©å­ï¼Œå½“äº«ä¸‡ä¸–', '1507-1567', 'æ¹–åŒ—é’Ÿç¥¥', 'é™ˆçš‡å', 'å¤§ç¤¼è®®ã€ä¸¥åµ©ä¸“æƒã€æŠ—å€­æˆ˜äº‰')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±åšç†œ</div>
                        <span class="reign-period">å˜‰é– (1521-1566)</span>
                        <p class="emperor-bio">é€šè¿‡å¤§ç¤¼è®®äº‹ä»¶ç¡®ç«‹æƒå¨ï¼Œå‰æœŸæœ‰ä¸ºåæœŸæ˜åº¸ã€‚æ²‰è¿·é“æ•™æ–¹æœ¯ï¼Œä¸¥åµ©ä¸“æƒäºŒåå¹´ï¼Œä½†æ˜æœåˆ¶åº¦éŸ§æ€§ä½¿å…¶ç»Ÿæ²»é•¿è¾¾45å¹´ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
                
                <div class="emperor-card" onclick="openEmperorModal('æœ±ç”±æ£€', 'æ˜æ€å®—', '1627-1644', 'å´‡ç¥¯', 'æ˜æœæœ«ä»£çš‡å¸ï¼Œå‹¤æ”¿å»‰æ”¿å´æ— åŠ›å›å¤©ã€‚åœ¨ä½17å¹´æ›´æ¢50ä½å†…é˜å¤§å­¦å£«ï¼Œè¯›æ€è¢å´‡ç„•ï¼Œé¢å¯¹å†…å¿§å¤–æ‚£ã€‚1644å¹´æè‡ªæˆæ”»å…¥åŒ—äº¬ï¼Œè‡ªç¼¢äºç…¤å±±ã€‚', 'æœ•éäº¡å›½ä¹‹å›ï¼Œè¯¸è‡£çš†äº¡å›½ä¹‹è‡£', '1611-1644', 'åŒ—äº¬', 'å‘¨çš‡å', 'è¯›æ€é­å¿ è´¤ã€å¤„æ­»è¢å´‡ç„•ã€è‡ªç¼¢ç…¤å±±')">
                    <div class="emperor-portrait">ğŸ‰</div>
                    <div class="emperor-info">
                        <div class="emperor-name">æœ±ç”±æ£€</div>
                        <span class="reign-period">å´‡ç¥¯ (1627-1644)</span>
                        <p class="emperor-bio">æ˜æœæœ€åä¸€ä½çš‡å¸ï¼Œå‹¤æ”¿å´åˆšæ„å¤šç–‘ã€‚é¢å¯¹å†…å¿§å¤–æ‚£æ— åŠ›å›å¤©ï¼Œ1644å¹´æè‡ªæˆæ”»ç ´åŒ—äº¬ï¼Œè‡ªç¼¢æ®‰å›½ï¼Œæ˜æœç­äº¡ã€‚</p>
                        <a href="#" class="read-more">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                    </div>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 25px; padding: 15px; background-color: #f8f9fa; border-radius: 8px; border: 1px dashed var(--border-color);">
                <p>ğŸ‘‘ <strong>å®Œæ•´çš‡å¸ä¸–ç³»ï¼š</strong> æœ±å…ƒç’‹ â†’ æœ±å…ç‚†(å»ºæ–‡) â†’ æœ±æ££ â†’ æœ±é«˜ç‚½ â†’ æœ±ç»åŸº â†’ æœ±ç¥é•‡ â†’ æœ±ç¥é’°(æ™¯æ³°) â†’ æœ±è§æ·± â†’ æœ±ç¥æ¨˜ â†’ æœ±åšç…§ â†’ æœ±åšç†œ â†’ æœ±è½½å– â†’ æœ±ç¿Šé’§ â†’ æœ±å¸¸æ´› â†’ æœ±ç”±æ ¡ â†’ æœ±ç”±æ£€</p>
                <p style="margin-top: 8px; color: var(--primary-color); font-weight: bold;">16ä½çš‡å¸ï¼Œ276å¹´å›½ç¥šï¼ˆ1368-1644ï¼‰</p>
            </div>
        </section>
        
        <section id="figures" class="section">
            <h2 class="section-title"><i class="fas fa-user-friends"></i> é£äº‘äººç‰©å…³ç³»</h2>
            <p>æ˜æœå†å²ä¸­æ¶Œç°å‡ºä¼—å¤šå½±å“å†å²è¿›ç¨‹çš„äººç‰©ï¼Œä»¥ä¸‹ä¸ºå…³é”®äººç‰©å…³ç³»ç½‘ç»œåŠç”Ÿå¹³ç®€ä»‹ï¼š</p>
            
            <div class="relationship-container">
                <div style="background: linear-gradient(135deg, var(--primary-color) 0%, var(--dark-color) 100%); color: white; padding: 15px; border-radius: 8px; margin-bottom: 20px; text-align: center; font-weight: bold;">
                    <i class="fas fa-sitemap"></i> äººç‰©å…³ç³»ç½‘ç»œå›¾ï¼ˆç‚¹å‡»èŠ‚ç‚¹æŸ¥çœ‹è¯¦æƒ…ï¼‰
                </div>
                <div id="relationship-chart"></div>
                
                <div class="person-card">
                    <div class="person-header">
                        <div class="person-avatar">ğŸ›¡ï¸</div>
                        <div>
                            <div class="person-name">äºè°¦</div>
                            <div class="person-title">æ°‘æ—è‹±é›„ Â· å…µéƒ¨å°šä¹¦</div>
                        </div>
                    </div>
                    <p class="person-bio">å­—å»·ç›Šï¼Œå·èŠ‚åºµï¼Œæµ™æ±Ÿé’±å¡˜äººã€‚æ˜æœåè‡£ã€æ°‘æ—è‹±é›„ã€‚åœŸæœ¨å ¡ä¹‹å˜åï¼Œè‹±å®—è¢«ä¿˜ï¼Œäº¬åŸå±æ®†ï¼Œäºè°¦åŠ›æ’å—è¿ä¹‹è®®ï¼Œæ‹¥ç«‹æ™¯æ³°å¸ï¼Œæ•´é¥¬å…µå¤‡ï¼Œéƒ¨ç½²è¦å®³ï¼Œäº²è‡ªç£æˆ˜ï¼Œç‡å¸ˆäºŒåäºŒä¸‡ï¼Œåˆ—é˜µåŒ—äº¬ä¹é—¨å¤–ï¼Œå¤§ç ´ç“¦å‰Œï¼Œä¿å«åŒ—äº¬åŸã€‚åè‹±å®—å¤è¾Ÿï¼Œäºè°¦è¢«è¯¬é™·å¤„æ­»ï¼ŒæŠ„å®¶æ—¶"å®¶æ— ä½™èµ„"ï¼Œåå¹³åæ˜­é›ªã€‚</p>
                    
                    <div class="key-events">
                        <h3><i class="fas fa-history"></i> å…³é”®äº‹ä»¶</h3>
                        <div class="event-item">â€¢ 1449å¹´ï¼šåœŸæœ¨å ¡ä¹‹å˜åä¸´å±å—å‘½ï¼Œç»„ç»‡åŒ—äº¬ä¿å«æˆ˜</div>
                        <div class="event-item">â€¢ 1450å¹´ï¼šæˆåŠŸå‡»é€€ç“¦å‰Œå¤§å†›ï¼Œä¿å…¨æ˜æœæ±Ÿå±±</div>
                        <div class="event-item">â€¢ 1457å¹´ï¼šå¤ºé—¨ä¹‹å˜åè¢«è¯¬é™·å¤„æ­»ï¼Œé—è¨€"ç²‰èº«ç¢éª¨æµ‘ä¸æ€•ï¼Œè¦ç•™æ¸…ç™½åœ¨äººé—´"</div>
                        <div class="event-item">â€¢ 1466å¹´ï¼šæ˜å®ªå®—ä¸ºå…¶å¹³åï¼Œè¿½è°¥"å¿ è‚ƒ"</div>
                    </div>
                </div>
                
                <div class="person-card" style="margin-top: 25px;">
                    <div class="person-header">
                        <div class="person-avatar">ğŸ§­</div>
                        <div>
                            <div class="person-name">éƒ‘å’Œ</div>
                            <div class="person-title">èˆªæµ·å®¶ Â· å¤–äº¤å®¶</div>
                        </div>
                    </div>
                    <p class="person-bio">åŸå§“é©¬ï¼Œå°åä¸‰ä¿ï¼Œäº‘å—æ˜†é˜³äººã€‚æ˜æœèˆªæµ·å®¶ã€å¤–äº¤å®¶ã€‚æœ¬ä¸ºç‡•ç‹æœ±æ££ä¾å«ï¼Œé–éš¾ä¹‹å½¹ä¸­ç«‹åŠŸï¼Œèµå§“éƒ‘ã€‚1405-1433å¹´ä¸ƒä¸‹è¥¿æ´‹ï¼Œæ‹œè®¿30å¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œæœ€è¿œåˆ°è¾¾ä¸œéã€çº¢æµ·ã€‚èˆ¹é˜Ÿè§„æ¨¡åºå¤§ï¼ŒæŠ€æœ¯å…ˆè¿›ï¼Œä¿ƒè¿›æµ·ä¸Šä¸ç»¸ä¹‹è·¯ç¹è£ã€‚å…¶èˆªæµ·å£®ä¸¾æ¯”å“¥ä¼¦å¸ƒæ—©87å¹´ï¼Œæ˜¯ä¸–ç•Œèˆªæµ·å²ä¸Šçš„å¥‡è¿¹ã€‚</p>
                    
                    <div class="key-events">
                        <h3><i class="fas fa-history"></i> å…³é”®äº‹ä»¶</h3>
                        <div class="event-item">â€¢ 1381å¹´ï¼šæ˜å†›å¹³å®šäº‘å—æ—¶è¢«ä¿˜ï¼Œå…¥å®«ä¸ºå®¦å®˜</div>
                        <div class="event-item">â€¢ 1405-1433å¹´ï¼šä¸ƒæ¬¡ç‡é¢†åºå¤§èˆ¹é˜Ÿä¸‹è¥¿æ´‹ï¼Œæœ€è¿œè‡³éæ´²</div>
                        <div class="event-item">â€¢ 1431å¹´ï¼šç¬¬ä¸ƒæ¬¡ä¸‹è¥¿æ´‹å‰åœ¨ç¦å»ºé•¿ä¹ç«‹ã€Šå¤©å¦ƒçµåº”ä¹‹è®°ç¢‘ã€‹</div>
                        <div class="event-item">â€¢ 1435å¹´ï¼šç—…é€äºå—äº¬ï¼Œè‘¬äºç‰›é¦–å±±</div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="battles" class="section">
            <h2 class="section-title"><i class="fas fa-crosshairs"></i> ç»å…¸æˆ˜å½¹æ¨æ¼”</h2>
            <p>é€šè¿‡åŠ¨æ€åœ°å›¾æ¨æ¼”æ˜æœå…³é”®æˆ˜å½¹çš„æˆ˜ç•¥éƒ¨ç½²ä¸æˆ˜åœºå½¢åŠ¿ï¼Œæ·±åº¦è§£æå†å²è½¬æŠ˜ç‚¹ï¼š</p>
            
            <div class="battle-container">
                <div style="text-align: center; margin-bottom: 20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); padding: 15px; border-radius: 10px; border: 1px solid var(--border-color);">
                    <div style="display: flex; justify-content: center; align-items: center; gap: 15px; flex-wrap: wrap;">
                        <h3 style="color: var(--primary-color); margin: 0; font-size: 1.4rem;">
                            <i class="fas fa-map-marked-alt"></i> <span id="battleTitle">é–éš¾ä¹‹å½¹ Â· åŒ—å¹³ä¿å«æˆ˜ï¼ˆ1399å¹´ï¼‰</span>
                        </h3>
                        <select id="battleSelect" class="battle-btn" style="padding: 6px 12px; background: white; border: 1px solid var(--primary-color); border-radius: 20px; font-weight: 500;">
                            <option value="jingnan">âš”ï¸ é–éš¾ä¹‹å½¹</option>
                            <option value="tumu">ğŸ›¡ï¸ åœŸæœ¨å ¡ä¹‹å˜</option>
                            <option value="beijing">ğŸ¯ åŒ—äº¬ä¿å«æˆ˜</option>
                            <option value="salarhu">ğŸ”¥ è¨å°”æµ’ä¹‹æˆ˜</option>
                        </select>
                    </div>
                    <p style="color: #495057; margin-top: 10px; max-width: 750px; margin-left: auto; margin-right: auto;" id="battleDescription">
                        ç‡•ç‹æœ±æ££èµ·å…µåæŠ—å»ºæ–‡å¸ï¼Œè€¿ç‚³æ–‡ç‡30ä¸‡å¤§å†›å›´æ”»åŒ—å¹³ã€‚æœ±æ££ä»¥å°‘èƒœå¤šï¼Œé‡‡ç”¨"å›´é­æ•‘èµµ"æˆ˜æœ¯è§£å›´ã€‚
                    </p>
                </div>
                
                <div class="battle-controls">
                    <button class="battle-btn" id="prevStep" disabled><i class="fas fa-step-backward"></i> ä¸Šä¸€æ­¥</button>
                    <button class="battle-btn" id="playPause"><i class="fas fa-play"></i> æ’­æ”¾æ¨æ¼”</button>
                    <button class="battle-btn" id="nextStep"><i class="fas fa-step-forward"></i> ä¸‹ä¸€æ­¥</button>
                    <button class="battle-btn" id="resetMap"><i class="fas fa-redo"></i> é‡ç½®</button>
                </div>
                
                <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                </div>
                
                <div class="battle-map-container">
                    <div class="battle-map" id="battleMap">
                        <!-- åŠ¨æ€ç”Ÿæˆçš„å†›é˜Ÿå’Œæ ‡è®° -->
                        <div class="army ming-army" id="mingArmy1" style="top: 60%; left: 20%;">è€¿</div>
                        <div class="army ming-army" id="mingArmy2" style="top: 65%; left: 25%;">æ</div>
                        <div class="army enemy-army" id="enemyArmy" style="top: 40%; left: 70%;">æœ±</div>
                        <div class="battle-label" style="top: 38%; left: 68%;">ç‡•ç‹æœ±æ££</div>
                        <div class="battle-label" style="top: 58%; left: 18%;">è€¿ç‚³æ–‡30ä¸‡</div>
                        <div class="battle-label" style="top: 15%; left: 50%;">åŒ—å¹³åŸ</div>
                        <div class="battle-label" style="top: 80%; left: 80%;">æ°¸å¹³</div>
                    </div>
                </div>
                
                <div class="battle-step" id="battleStep">
                    <h4>ç¬¬1æ­¥ï¼šå»ºæ–‡å¸æ´¾å…µå›´å‰¿</h4>
                    <p>1399å¹´8æœˆï¼Œå»ºæ–‡å¸å‘½é•¿å…´ä¾¯è€¿ç‚³æ–‡ä¸ºå¤§å°†å†›ï¼Œç‡30ä¸‡å¤§å†›åŒ—ä¼ç‡•ç‹ã€‚è€¿ç‚³æ–‡å‰é”‹9000äººé©»æ‰é›„å¿ï¼Œä¸»åŠ›å±¯äºçœŸå®šï¼ˆä»Šæ²³åŒ—æ­£å®šï¼‰ï¼Œå¯¹åŒ—å¹³å½¢æˆåŒ…å›´ä¹‹åŠ¿ã€‚</p>
                </div>
            </div>
            
            <div style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin-top: 30px; border-left: 4px solid var(--secondary-color);">
                <h3 style="color: var(--primary-color); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-book"></i> å…¶ä»–ç»å…¸æˆ˜å½¹
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="padding: 10px; background: white; border-radius: 6px; box-shadow: var(--shadow);">
                        <strong>é„±é˜³æ¹–æ°´æˆ˜</strong><br>
                        <span style="color: var(--primary-color); font-size: 0.9rem;">1363å¹´ Â· æœ±å…ƒç’‹ vs é™ˆå‹è°…</span>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 6px; box-shadow: var(--shadow);">
                        <strong>åœŸæœ¨å ¡ä¹‹å˜</strong><br>
                        <span style="color: var(--primary-color); font-size: 0.9rem;">1449å¹´ Â· æ˜è‹±å®—è¢«ä¿˜</span>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 6px; box-shadow: var(--shadow);">
                        <strong>åŒ—äº¬ä¿å«æˆ˜</strong><br>
                        <span style="color: var(--primary-color); font-size: 0.9rem;">1449å¹´ Â· äºè°¦æŠ—ç“¦å‰Œ</span>
                    </div>
                    <div style="padding: 10px; background: white; border-radius: 6px; box-shadow: var(--shadow);">
                        <strong>è¨å°”æµ’ä¹‹æˆ˜</strong><br>
                        <span style="color: var(--primary-color); font-size: 0.9rem;">1619å¹´ Â· æ˜å†›æƒ¨è´¥åé‡‘</span>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="search" class="section">
            <h2 class="section-title"><i class="fas fa-search"></i> å†å²äº‹ä»¶æ£€ç´¢</h2>
            <p>å¿«é€Ÿæ£€ç´¢æ˜æœå†å²ä¸­çš„äººç‰©ã€äº‹ä»¶ã€æˆ˜å½¹ã€å…¸ç« åˆ¶åº¦ç­‰ï¼Œç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ç›¸å…³è¯¦æƒ…ï¼š</p>
            
            <div class="search-container">
                <input type="text" class="search-box" id="searchInput" placeholder="è¾“å…¥å…³é”®è¯ï¼ˆå¦‚ï¼šé–éš¾ä¹‹å½¹ã€äºè°¦ã€éƒ‘å’Œ...ï¼‰">
            </div>
            
            <div style="display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin: 25px 0;">
                <button class="battle-btn" onclick="quickSearch('é–éš¾ä¹‹å½¹')"><i class="fas fa-bolt"></i> é–éš¾ä¹‹å½¹</button>
                <button class="battle-btn" onclick="quickSearch('åœŸæœ¨å ¡ä¹‹å˜')"><i class="fas fa-bolt"></i> åœŸæœ¨å ¡ä¹‹å˜</button>
                <button class="battle-btn" onclick="quickSearch('éƒ‘å’Œä¸‹è¥¿æ´‹')"><i class="fas fa-bolt"></i> éƒ‘å’Œä¸‹è¥¿æ´‹</button>
                <button class="battle-btn" onclick="quickSearch('å¼ å±…æ­£')"><i class="fas fa-bolt"></i> å¼ å±…æ­£</button>
                <button class="battle-btn" onclick="quickSearch('æˆšç»§å…‰')"><i class="fas fa-bolt"></i> æˆšç»§å…‰</button>
                <button class="battle-btn" onclick="quickSearch('ä¸œæ—å…š')"><i class="fas fa-bolt"></i> ä¸œæ—å…š</button>
                <button class="battle-btn" onclick="quickSearch('é”¦è¡£å«')"><i class="fas fa-bolt"></i> é”¦è¡£å«</button>
                <button class="battle-btn" onclick="quickSearch('ä¸€æ¡é­æ³•')"><i class="fas fa-bolt"></i> ä¸€æ¡é­æ³•</button>
            </div>
            
            <div class="search-results" id="searchResults">
                <!-- æ£€ç´¢ç»“æœå°†åŠ¨æ€æ’å…¥æ­¤å¤„ -->
                <div class="result-card">
                    <div class="result-title">
                        <span class="result-type emperor"><i class="fas fa-crown"></i> çš‡å¸</span>
                        æœ±å…ƒç’‹ï¼ˆæ˜å¤ªç¥–ï¼‰
                    </div>
                    <p class="result-content">æ˜æœå¼€å›½çš‡å¸ï¼ˆ1368-1398å¹´åœ¨ä½ï¼‰ï¼Œå¹´å·æ´ªæ­¦ã€‚ä»ä¹ä¸åˆ°çš‡å¸çš„ä¼ å¥‡äººç‰©ï¼Œæ¨ç¿»å…ƒæœç»Ÿæ²»ï¼Œå»ºç«‹æ˜æœã€‚åœ¨ä½æœŸé—´å®è¡Œä¼‘å…»ç”Ÿæ¯æ”¿ç­–ï¼Œæ¢å¤ç¤¾ä¼šç»æµï¼Œå²ç§°"æ´ªæ­¦ä¹‹æ²»"ã€‚æ™šå¹´å¤§æ€åŠŸè‡£ï¼Œè®¾ç«‹é”¦è¡£å«åŠ å¼ºçš‡æƒã€‚</p>
                </div>
                
                <div class="result-card">
                    <div class="result-title">
                        <span class="result-type battle"><i class="fas fa-crosshairs"></i> æˆ˜å½¹</span>
                        é„±é˜³æ¹–æ°´æˆ˜
                    </div>
                    <p class="result-content">1363å¹´8-10æœˆï¼Œæœ±å…ƒç’‹ä¸é™ˆå‹è°…åœ¨é„±é˜³æ¹–å†³æˆ˜ã€‚æœ±å…ƒç’‹é‡‡ç”¨ç«æ”»æˆ˜æœ¯ï¼Œä»¥20ä¸‡å…µåŠ›å‡»è´¥é™ˆå‹è°…60ä¸‡å¤§å†›ï¼Œå¥ å®šç»Ÿä¸€æ±Ÿå—çš„åŸºç¡€ã€‚æ­¤æˆ˜æ˜¯ä¸­å›½å†å²ä¸Šè§„æ¨¡æœ€å¤§çš„æ°´æˆ˜ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯ä¸­ä¸–çºªä¸–ç•Œè§„æ¨¡æœ€å¤§çš„æ°´æˆ˜ã€‚</p>
                </div>
                
                <div class="result-card">
                    <div class="result-title">
                        <span class="result-type book"><i class="fas fa-book"></i> ä¹¦ç±ç« èŠ‚</span>
                        ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹ç¬¬ä¸€éƒ¨ ç¬¬ä¸ƒç« 
                    </div>
                    <p class="result-content">è¯¦ç»†æè¿°æœ±å…ƒç’‹ä¸é™ˆå‹è°…çš„å†³æˆ˜è¿‡ç¨‹ï¼Œç”ŸåŠ¨åˆ»ç”»äº†æœ±å…ƒç’‹çš„å†›äº‹æ‰èƒ½å’Œé™ˆå‹è°…çš„åˆšæ„è‡ªç”¨ã€‚ä½œè€…ä»¥"è°æ‰æ˜¯æœ€åçš„èƒœåˆ©è€…"ä¸ºæ‚¬å¿µï¼Œå±‚å±‚æ¨è¿›æˆ˜å½¹ç»†èŠ‚ï¼Œå±•ç°å¤ä»£æ°´æˆ˜çš„å£®è§‚åœºé¢ã€‚</p>
                </div>
            </div>
        </section>
    </div>
    
    <!-- çš‡å¸è¯¦æƒ…æ¨¡æ€æ¡† -->
    <div class="modal" id="emperorModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeEmperorModal()">&times;</span>
            <div class="modal-header">
                <h2 class="emperor-full-name" id="modalEmperorName">çš‡å¸å§“å</h2>
                <span class="emperor-reign" id="modalReignTitle">çš‡å¸ç§°å· Â· å¹´å· (åœ¨ä½æ—¶é—´)</span>
            </div>
            <div class="modal-body">
                <div style="display: flex; flex-wrap: wrap; gap: 30px;">
                    <div style="flex: 1; min-width: 250px;">
                        <div style="background: linear-gradient(45deg, var(--primary-color), var(--dark-color)); height: 220px; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 5rem; font-weight: bold;">
                            ğŸ‰
                        </div>
                    </div>
                    <div style="flex: 2; min-width: 300px;">
                        <div class="emperor-details">
                            <div class="detail-item">
                                <div class="detail-label">ç”Ÿå’å¹´ä»½</div>
                                <div id="modalLifespan">1328-1398</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">å‡ºç”Ÿåœ°</div>
                                <div id="modalBirthplace">å®‰å¾½å‡¤é˜³</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">çš‡å</div>
                                <div id="modalEmpress">é©¬çš‡å</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">ä¸»è¦åŠŸç»©</div>
                                <div id="modalAchievements">é©±é€èƒ¡è™ï¼Œæ¢å¤ä¸­åï¼Œç«‹çº²é™ˆçºªï¼Œæ•‘æµæ–¯æ°‘</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">å†å²è¯„ä»·</div>
                                <div id="modalEvaluation">æ²»éš†å”å®‹ï¼Œè¿œè¿ˆæ±‰å”ï¼ˆæ¸…åº·ç†™å¸è¯„ï¼‰</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">é‡å¤§äº‹ä»¶</div>
                                <div id="modalEvents">è¯›æ€èƒ¡æƒŸåº¸ã€è“ç‰ç­‰åŠŸè‡£ï¼Œè®¾ç«‹é”¦è¡£å«</div>
                            </div>
                             <div class="detail-item">
                                <div class="detail-label">é™µå¢“</div>
                                <div id="modalMausoleum">æ˜å­é™µï¼ˆå—äº¬ï¼‰</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">å¹´å·æ·±æ„</div>
                                <div id="modalEraMeaning">â€œæ´ªæ­¦â€ï¼šå½°æ˜¾å¼€å›½æ­¦åŠŸï¼Œéœ‡æ…‘å››æ–¹</div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">å†å²åæ ‡</div>
                                <div id="modalLegacy">å¥ å®šæ˜ä»£åˆ¶åº¦æ ¹åŸºï¼Œå½±å“åä¸–å…­ç™¾å¹´</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="emperor-full-bio" id="modalBio">
                    <!-- ç”Ÿå¹³ç®€ä»‹å°†é€šè¿‡JSå¡«å…… -->
                </div>
                
                <div style="margin-top: 25px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                    <h3 style="color: var(--primary-color); margin-bottom: 15px;"><i class="fas fa-quote-left"></i> å†å²åè¨€</h3>
                    <p style="font-style: italic; font-size: 1.2rem; color: var(--dark-color); padding: 15px; background-color: var(--light-color); border-left: 3px solid var(--secondary-color);" id="modalQuote">
                        æœ•è†ºå¤©å‘½ä¸‰åæœ‰ä¸€å¹´ï¼Œå¿§å±ç§¯å¿ƒï¼Œæ—¥å‹¤ä¸æ€ 
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <p>ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹å†å²è„‰ç»œæ¢³ç†ç³»ç»Ÿ Â· ä¸“æ³¨æ˜æœ276å¹´å†å²ç ”ç©¶</p>
            <p style="margin: 8px 0; color: #e9ecef;">æ•°æ®æ¥æºï¼šã€Šæ˜å²ã€‹ã€Šæ˜å®å½•ã€‹åŠã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹åŸè‘—</p>
            <div class="footer-links">
                <a href="#"><i class="fas fa-book"></i> åŸè‘—è´­ä¹°</a>
                <a href="#"><i class="fas fa-video"></i> çºªå½•ç‰‡æ¨è</a>
                <a href="#"><i class="fas fa-university"></i> æ˜å²ç ”ç©¶</a>
                <a href="#"><i class="fas fa-code"></i> é¡¹ç›®å¼€æº</a>
                <a href="#"><i class="fas fa-comment"></i> è¯»è€…äº¤æµ</a>
            </div>
            <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">Â© 2023 æ˜æœå†å²ç ”ç©¶ | æœ¬é¡¹ç›®ä»…ç”¨äºå†å²å­¦ä¹ ä¸äº¤æµ</p>
        </div>
    </footer>

    <script>
        // å¯¼èˆªæ æ¿€æ´»çŠ¶æ€åˆ‡æ¢
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-tabs a');
            const sections = document.querySelectorAll('.section');
            
            // å¯¼èˆªç‚¹å‡»äº‹ä»¶
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    
                    // æ›´æ–°æ¿€æ´»çŠ¶æ€
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    // æ»šåŠ¨åˆ°ç›®æ ‡åŒºåŸŸ
                    if(targetId === '#overview') {
                        window.scrollTo({top: 0, behavior: 'smooth'});
                    } else {
                        document.querySelector(targetId).scrollIntoView({behavior: 'smooth'});
                    }
                });
            });
            
            // é¡µé¢æ»šåŠ¨æ—¶æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
            window.addEventListener('scroll', function() {
                let currentSection = '#overview';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    if(pageYOffset >= sectionTop) {
                        currentSection = `#${section.getAttribute('id')}`;
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if(link.getAttribute('href') === currentSection) {
                        link.classList.add('active');
                    }
                });
            });
            
            // çš‡å¸æ¨¡æ€æ¡†åŠŸèƒ½
            window.openEmperorModal = function(name, title, reign, era, bio, quote, lifespan, birthplace, empress, events) {
                document.getElementById('modalEmperorName').textContent = name;
                document.getElementById('modalReignTitle').textContent = `${title} Â· ${era} (${reign})`;
                document.getElementById('modalBio').textContent = bio;
                document.getElementById('modalQuote').textContent = quote;
                document.getElementById('modalLifespan').textContent = lifespan;
                document.getElementById('modalBirthplace').textContent = birthplace;
                document.getElementById('modalEmpress').textContent = empress;
                document.getElementById('modalEvents').textContent = events;
                document.getElementById('emperorModal').style.display = 'flex';
                
                // ç®€å•å†å²è¯„ä»·ï¼ˆæ ¹æ®çš‡å¸ï¼‰
                let evaluation = '';
                if(name === 'æœ±å…ƒç’‹') {
                    evaluation = 'æ²»éš†å”å®‹ï¼Œè¿œè¿ˆæ±‰å”ï¼ˆæ¸…åº·ç†™å¸è¯„ï¼‰';
                } else if(name === 'æœ±æ££') {
                    evaluation = 'å¹…å‘˜ä¹‹å¹¿ï¼Œè¿œè¿ˆæ±‰å”ï¼›æˆåŠŸéªçƒˆï¼Œå“ä¹ç››çŸ£ï¼ˆã€Šæ˜å²ã€‹è¯„ï¼‰';
                } else if(name === 'æœ±ç»åŸº') {
                    evaluation = 'ä»å®£è‡´æ²»ï¼Œå¯æ¯”æ±‰å”ï¼ˆåä¸–è¯„ï¼‰';
                } else if(name === 'æœ±ç¥é•‡') {
                    evaluation = 'å‰ååœ¨ä½äºŒåå››å¹´ï¼Œæ— ç”šç¨—æ”¿ï¼ˆã€Šæ˜å²ã€‹è¯„ï¼Œæœ‰äº‰è®®ï¼‰';
                } else if(name === 'æœ±åšç†œ') {
                    evaluation = 'ä¸­æä¹‹ä¸»ï¼ŒåŠŸè¿‡å‚åŠï¼ˆåä¸–è¯„ï¼‰';
                } else if(name === 'æœ±ç”±æ£€') {
                    evaluation = 'éäº¡å›½ä¹‹å›ï¼Œè€Œå½“äº¡å›½ä¹‹è¿ï¼ˆå­Ÿæ£®è¯„ï¼‰';
                } else {
                    evaluation = 'åŠŸè¿‡è‡ªæœ‰åäººè¯„è¯´';
                }
                document.getElementById('modalEvaluation').textContent = evaluation;
                
                // ä¸»è¦åŠŸç»©
                let achievements = '';
                if(name === 'æœ±å…ƒç’‹') {
                    achievements = 'é©±é€èƒ¡è™ï¼Œæ¢å¤ä¸­åï¼Œç«‹çº²é™ˆçºªï¼Œæ•‘æµæ–¯æ°‘';
                } else if(name === 'æœ±æ££') {
                    achievements = 'è¿éƒ½åŒ—äº¬ã€éƒ‘å’Œä¸‹è¥¿æ´‹ã€ç¼–çº‚ã€Šæ°¸ä¹å¤§å…¸ã€‹ã€äº”å¾è’™å¤';
                } else if(name === 'æœ±ç»åŸº') {
                    achievements = 'å¹³å®šæ±‰ç‹å›ä¹±ï¼Œä¼‘å…»ç”Ÿæ¯ï¼Œå¼€åˆ›ä»å®£ä¹‹æ²»';
                } else if(name === 'æœ±ç¥é•‡') {
                    achievements = 'å‰æœŸä¸‰æ¨è¾…æ”¿æœ‰æˆï¼ŒåæœŸå¤ºé—¨å¤è¾Ÿ';
                } else if(name === 'æœ±åšç†œ') {
                    achievements = 'å¤§ç¤¼è®®ç¡®ç«‹çš‡æƒï¼Œå‰æœŸæ•´é¡¿æœçº²ï¼ŒæŠ—å€­å¾¡è™';
                } else if(name === 'æœ±ç”±æ£€') {
                    achievements = 'å‹¤æ”¿å»‰æ”¿ï¼Œé“²é™¤é­å¿ è´¤é˜‰å…š';
                } else {
                    achievements = 'åœ¨ä½æœŸé—´é‡è¦æ”¿ç»©';
                }
                document.getElementById('modalAchievements').textContent = achievements;
            };
            
            window.closeEmperorModal = function() {
                document.getElementById('emperorModal').style.display = 'none';
            };
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.onclick = function(event) {
                const modal = document.getElementById('emperorModal');
                if(event.target == modal) {
                    modal.style.display = 'none';
                }
            };
            
            // æˆ˜å½¹æ¨æ¼”åŠŸèƒ½
            const battleSteps = [
                {
                    title: "ç¬¬1æ­¥ï¼šå»ºæ–‡å¸æ´¾å…µå›´å‰¿",
                    content: "1399å¹´8æœˆï¼Œå»ºæ–‡å¸å‘½é•¿å…´ä¾¯è€¿ç‚³æ–‡ä¸ºå¤§å°†å†›ï¼Œç‡30ä¸‡å¤§å†›åŒ—ä¼ç‡•ç‹ã€‚è€¿ç‚³æ–‡å‰é”‹9000äººé©»æ‰é›„å¿ï¼Œä¸»åŠ›å±¯äºçœŸå®šï¼ˆä»Šæ²³åŒ—æ­£å®šï¼‰ï¼Œå¯¹åŒ—å¹³å½¢æˆåŒ…å›´ä¹‹åŠ¿ã€‚"
                },
                {
                    title: "ç¬¬2æ­¥ï¼šæœ±æ££å¤œè¢­é›„å¿",
                    content: "æœ±æ££è¶ä¸­ç§‹å¤œæ•Œå†›ä¸å¤‡ï¼Œç‡ç²¾é”çªè¢­é›„å¿ã€‚è€¿ç‚³æ–‡å‰é”‹å†›æ¯«æ— é˜²å¤‡ï¼Œå…¨å†›è¦†æ²¡ã€‚åŒæ—¶æ´¾å…µåŸ‹ä¼äºæœˆæ¼¾æ¡¥ï¼Œæˆªæ€é„šå·æ´å†›ã€‚"
                },
                {
                    title: "ç¬¬3æ­¥ï¼šå›å¸ˆå¤¹å‡»çœŸå®š",
                    content: "æœ±æ££ä¹˜èƒœå›å¸ˆåŒ—å¹³ï¼Œä¸åŸå†…å®ˆå†›ï¼ˆå¼ ç‰ã€æœ±èƒ½ï¼‰é‡Œåº”å¤–åˆã€‚ç‡•å†›åˆ†å…µä¸‰è·¯ï¼šæœ±æ££äº²ç‡ä¸»åŠ›æ­£é¢è¿›æ”»ï¼Œå¾ç¥¥ç»•åæ–­ç²®é“ï¼Œæœ±èƒ½ä¾§ç¿¼çªå‡»ã€‚"
                },
                {
                    title: "ç¬¬4æ­¥ï¼šçœŸå®šå†³æˆ˜",
                    content: "ä¸¤å†›åœ¨çœŸå®šåŸå¤–äº¤æˆ˜ã€‚è€¿ç‚³æ–‡å¸ƒä¸‹æè§’ä¹‹åŠ¿ï¼Œä½†ç‡•å†›éª‘å…µçªå‡»å…¶ä¾§ç¿¼ã€‚æœ±æ££äº²ç‡800æ­»å£«ç›´å†²ä¸­å†›ï¼Œæ˜å†›é˜µå‹å¤§ä¹±ï¼Œæºƒé€€å…¥åŸã€‚"
                },
                {
                    title: "ç¬¬5æ­¥ï¼šåŒ—å¹³è§£å›´",
                    content: "è€¿ç‚³æ–‡é€€å®ˆçœŸå®šåŸï¼ŒæŸå¤±è¿‘10ä¸‡å…µåŠ›ã€‚å»ºæ–‡å¸éœ‡æ€’ï¼Œæ’¤æ¢è€¿ç‚³æ–‡ï¼Œæ”¹æ´¾ææ™¯éš†ç‡50ä¸‡å¤§å†›å†å¾ã€‚æœ±æ££æˆåŠŸè§£é™¤åŒ—å¹³ä¹‹å›´ï¼Œå¥ å®šé–éš¾ä¹‹å½¹åŸºç¡€ã€‚"
                }
            ];
                        // ===== æˆ˜å½¹æ•°æ®åº“ï¼ˆç²¾å‡†è¡¥å……ï¼‰=====
            const BATTLE_LIBRARY = {
                jingnan: {
                    title: "é–éš¾ä¹‹å½¹ Â· åŒ—å¹³ä¿å«æˆ˜ï¼ˆ1399å¹´ï¼‰",
                    desc: "ç‡•ç‹æœ±æ££èµ·å…µåæŠ—å»ºæ–‡å¸ï¼Œè€¿ç‚³æ–‡ç‡30ä¸‡å¤§å†›å›´æ”»åŒ—å¹³ã€‚æœ±æ££ä»¥å°‘èƒœå¤šï¼Œé‡‡ç”¨'å›´é­æ•‘èµµ'æˆ˜æœ¯è§£å›´ã€‚",
                    steps: [/* åŸæœ‰5æ­¥æ•°æ®ä¿æŒä¸å˜ */],
                    initialPositions: [
                        {id:'mingArmy1', top:'60%', left:'20%', text:'è€¿'},
                        {id:'mingArmy2', top:'65%', left:'25%', text:'æ'},
                        {id:'enemyArmy', top:'40%', left:'70%', text:'æœ±'}
                    ]
                },
                tumu: {
                    title: "åœŸæœ¨å ¡ä¹‹å˜ï¼ˆ1449å¹´ï¼‰",
                    desc: "æ˜è‹±å®—äº²å¾ç“¦å‰Œï¼Œåœ¨åœŸæœ¨å ¡é­ä¹Ÿå…ˆå›´æ­¼ï¼Œ20ä¸‡æ˜å†›ç²¾é”å°½å¤±ï¼Œè‹±å®—è¢«ä¿˜ï¼Œæ˜æœç”±ç››è½¬è¡°ã€‚",
                    steps: [
                        {title:"ç¬¬1æ­¥ï¼šä»“ä¿ƒäº²å¾", content:"1449å¹´7æœˆï¼Œè‹±å®—åœ¨ç‹æŒ¯æ€‚æ¿ä¸‹ç‡20ä¸‡å¤§å†›ä»“ä¿ƒå‡ºå¾ï¼Œåå‹¤æ··ä¹±ï¼Œå‡†å¤‡ä¸è¶³ã€‚"},
                        {title:"ç¬¬2æ­¥ï¼šé€€è‡³é™©åœ°", content:"é€€è‡³åœŸæœ¨å ¡ï¼ˆè·æ€€æ¥åŸ20é‡Œï¼‰ï¼Œç‹æŒ¯ä¸ºç­‰è¾é‡è½¦æ‹’ç»å…¥åŸï¼Œè‡´æ˜å†›è¢«ç“¦å‰ŒåŒ…å›´æ–­æ°´ã€‚"},
                        {title:"ç¬¬3æ­¥ï¼šå‡æ„è®®å’Œ", content:"ä¹Ÿå…ˆå‡æ„è®®å’Œæ’¤å†›ï¼Œç‹æŒ¯ä¿¡ä»¥ä¸ºçœŸä¸‹ä»¤ç§»è¥å°±æ°´ï¼Œé˜µå‹å¤§ä¹±ã€‚"},
                        {title:"ç¬¬4æ­¥ï¼šå…¨å†›è¦†æ²¡", content:"ç“¦å‰Œéª‘å…µçªè¢­ï¼Œæ˜å†›æºƒè´¥ã€‚è‹±å®—è¢«ä¿˜ï¼Œç‹æŒ¯è¢«æ€ï¼Œ50ä½™å¤§è‡£æˆ˜æ­»ï¼Œç²¾é”æŸå¤±æ®†å°½ã€‚"},
                        {title:"ç¬¬5æ­¥ï¼šå†å²è½¬æŠ˜", content:"æ¶ˆæ¯ä¼ è‡³åŒ—äº¬ï¼Œäºè°¦åŠ›æ’å—è¿ä¹‹è®®ï¼Œæ‹¥ç«‹æ™¯æ³°å¸ï¼Œå¼€å¯åŒ—äº¬ä¿å«æˆ˜ã€‚"}
                    ],
                    initialPositions: [
                        {id:'mingArmy1', top:'50%', left:'30%', text:'è‹±å®—'},
                        {id:'enemyArmy', top:'40%', left:'60%', text:'ä¹Ÿå…ˆ'},
                        {id:'mingArmy2', top:'55%', left:'35%', text:'ç‹æŒ¯'}
                    ]
                },
                beijing: {
                    title: "åŒ—äº¬ä¿å«æˆ˜ï¼ˆ1449å¹´ï¼‰",
                    desc: "äºè°¦ä¸´å±å—å‘½ï¼Œæ•´å†›22ä¸‡å®ˆåŒ—äº¬ä¹é—¨ï¼Œå¤§è´¥ç“¦å‰Œï¼Œä¿å…¨æ˜æœå›½ç¥šã€‚",
                    steps: [
                        {title:"ç¬¬1æ­¥ï¼šä¸´å±å—å‘½", content:"åœŸæœ¨å ¡è´¥è®¯è‡³äº¬ï¼Œäºè°¦å‡å…µéƒ¨å°šä¹¦ï¼Œæ–©ä¸»å¼ å—è¿è€…ä»¥å®šå†›å¿ƒã€‚"},
                        {title:"ç¬¬2æ­¥ï¼šæ‹¥ç«‹æ–°å›", content:"æ‹¥ç«‹éƒ•ç‹æœ±ç¥é’°ä¸ºå¸ï¼ˆæ™¯æ³°å¸ï¼‰ï¼Œå°Šè‹±å®—ä¸ºå¤ªä¸Šçš‡ï¼Œç»ç“¦å‰ŒæŒŸæŒå‹’ç´¢ä¹‹å¿µã€‚"},
                        {title:"ç¬¬3æ­¥ï¼šä¹é—¨å¸ƒé˜²", content:"è°ƒå„åœ°å‹¤ç‹å†›ï¼Œ22ä¸‡å…µåŠ›åˆ†å®ˆåŒ—äº¬ä¹é—¨ï¼Œäºè°¦äº²å®ˆå¾·èƒœé—¨ã€‚"},
                        {title:"ç¬¬4æ­¥ï¼šå¾·èƒœé—¨ä¼å‡»", content:"ä¹Ÿå…ˆæŒŸè‹±å®—è‡³å¾·èƒœé—¨ï¼Œäºè°¦è®¾ç«å™¨ä¼å…µï¼Œå¤§è´¥ç“¦å‰Œå…ˆé”‹ã€‚"},
                        {title:"ç¬¬5æ­¥ï¼šå…¨çº¿å‘Šæ·", content:"ç“¦å‰Œè½¬æ”»è¥¿ç›´é—¨ã€å½°ä¹‰é—¨å‡è¢«å‡»é€€ï¼Œä¹Ÿå…ˆè´¥èµ°ï¼Œæ˜æœè½¬å±ä¸ºå®‰ã€‚"}
                    ],
                    initialPositions: [
                        {id:'mingArmy1', top:'45%', left:'50%', text:'äºè°¦'},
                        {id:'enemyArmy', top:'35%', left:'65%', text:'ä¹Ÿå…ˆ'},
                        {id:'mingArmy2', top:'50%', left:'45%', text:'çŸ³äº¨'}
                    ]
                },
                salarhu: {
                    title: "è¨å°”æµ’ä¹‹æˆ˜ï¼ˆ1619å¹´ï¼‰",
                    desc: "æ˜å†›åˆ†å››è·¯æ”»åé‡‘ï¼ŒåŠªå°”å“ˆèµ¤â€œå‡­å°”å‡ è·¯æ¥ï¼Œæˆ‘åªä¸€è·¯å»â€ï¼Œ5å¤©æ­¼æ˜å†›4.5ä¸‡ï¼Œæ˜æœä¸§å¤±è¾½ä¸œä¸»åŠ¨æƒã€‚",
                    steps: [
                        {title:"ç¬¬1æ­¥ï¼šå››è·¯å‡ºå¸ˆ", content:"æ¨é•ç‡11ä¸‡æ˜å†›ï¼ˆå«æœé²œã€å¶èµ«æ´å†›ï¼‰åˆ†å››è·¯æ”»èµ«å›¾é˜¿æ‹‰ï¼Œæ„å›¾åˆå›´ã€‚"},
                        {title:"ç¬¬2æ­¥ï¼šæœæ¾å†’è¿›", content:"å±±æµ·å…³æ€»å…µæœæ¾è½»æ•Œå†’è¿›ï¼Œåœ¨è¨å°”æµ’é­åé‡‘ä¸»åŠ›ä¼å‡»ï¼Œå…¨å†›è¦†æ²¡ã€‚"},
                        {title:"ç¬¬3æ­¥ï¼šé©¬æ—æºƒè´¥", content:"åŒ—è·¯é©¬æ—å†›é—»è®¯æ…Œä¹±å¸ƒé˜µï¼Œè¢«åŠªå°”å“ˆèµ¤å„ä¸ªå‡»ç ´ï¼Œä»…é©¬æ—å•éª‘é€ƒè„±ã€‚"},
                        {title:"ç¬¬4æ­¥ï¼šåˆ˜ç¶ä¸­ä¼", content:"ä¸œè·¯åˆ˜ç¶æ·±å…¥é™©åœ°ï¼Œé­å‡æƒ…æŠ¥è¯±å…¥ä¼å‡»åœˆï¼ŒåŠ›æˆ˜æ®‰å›½ã€‚"},
                        {title:"ç¬¬5æ­¥ï¼šå†å²è½¬æŠ˜", content:"æ˜å†›4è·¯3æºƒï¼ŒæŸå¤±4.5ä¸‡äººã€‚åé‡‘ç¡®ç«‹è¾½ä¸œéœ¸æƒï¼Œæ˜æœè½¬å…¥æˆ˜ç•¥é˜²å¾¡ã€‚"}
                    ],
                    initialPositions: [
                        {id:'mingArmy1', top:'30%', left:'25%', text:'æœæ¾'},
                        {id:'mingArmy2', top:'40%', left:'20%', text:'é©¬æ—'},
                        {id:'enemyArmy', top:'50%', left:'60%', text:'åŠªå°”å“ˆèµ¤'}
                    ]
                }
            };

            // åˆå§‹åŒ–å½“å‰æˆ˜å½¹
            let currentBattle = 'jingnan';
            let battleSteps = BATTLE_LIBRARY[currentBattle].steps;
            
            // æˆ˜å½¹åˆ‡æ¢ç›‘å¬
            document.getElementById('battleSelect').addEventListener('change', function() {
                clearInterval(autoPlayInterval);
                currentBattle = this.value;
                const battle = BATTLE_LIBRARY[currentBattle];
                
                // æ›´æ–°æ ‡é¢˜æè¿°
                document.getElementById('battleTitle').textContent = battle.title;
                document.getElementById('battleDescription').textContent = battle.desc;
                
                // é‡ç½®æ¨æ¼”çŠ¶æ€
                currentStep = 0;
                battleSteps = battle.steps;
                
                // é‡ç½®åœ°å›¾å†›é˜Ÿï¼ˆç®€åŒ–ç‰ˆï¼šæ¸…ç©ºé‡å»ºï¼‰
                const map = document.getElementById('battleMap');
                map.innerHTML = `
                    <div class="battle-label" style="top: 15%; left: 50%;">æˆ˜ç•¥è¦åœ°</div>
                    ${battle.initialPositions.map(pos => 
                        `<div class="army ${pos.id.includes('enemy') ? 'enemy-army' : 'ming-army'}" 
                            id="${pos.id}" style="top:${pos.top};left:${pos.left}">${pos.text}</div>`
                    ).join('')}
                `;
                updateBattleStep();
            });
            
            let currentStep = 0;
            let autoPlayInterval = null;
            const stepDots = document.querySelectorAll('.step-dot');
            const battleStepEl = document.getElementById('battleStep');
            const prevBtn = document.getElementById('prevStep');
            const nextBtn = document.getElementById('nextStep');
            const playPauseBtn = document.getElementById('playPause');
            const resetBtn = document.getElementById('resetMap');
            
            // åˆå§‹åŒ–æ­¥éª¤æ˜¾ç¤º
            updateBattleStep();
            
            // æ›´æ–°æˆ˜å½¹æ­¥éª¤
            function updateBattleStep() {
                // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
                stepDots.forEach((dot, index) => {
                    dot.classList.toggle('active', index === currentStep);
                });
                
                // æ›´æ–°æ­¥éª¤æè¿°
                battleStepEl.innerHTML = `
                    <h4>${battleSteps[currentStep].title}</h4>
                    <p>${battleSteps[currentStep].content}</p>
                `;
                
                // æ›´æ–°åœ°å›¾å…ƒç´ ä½ç½®ï¼ˆç®€åŒ–ç‰ˆï¼‰
                const mingArmy1 = document.getElementById('mingArmy1');
                const mingArmy2 = document.getElementById('mingArmy2');
                const enemyArmy = document.getElementById('enemyArmy');
                
                // æ ¹æ®æ­¥éª¤ç§»åŠ¨å†›é˜Ÿä½ç½®
                switch(currentStep) {
                    case 0:
                        mingArmy1.style.top = '60%'; mingArmy1.style.left = '20%';
                        mingArmy2.style.top = '65%'; mingArmy2.style.left = '25%';
                        enemyArmy.style.top = '40%'; enemyArmy.style.left = '70%';
                        break;
                    case 1:
                        mingArmy1.style.top = '30%'; mingArmy1.style.left = '45%'; // ç§»å‘é›„å¿
                        mingArmy2.style.top = '65%'; mingArmy2.style.left = '25%';
                        enemyArmy.style.top = '35%'; enemyArmy.style.left = '50%'; // å‘é›„å¿ç§»åŠ¨
                        break;
                    case 2:
                        mingArmy1.style.display = 'none'; // å‰é”‹è¢«æ­¼ç­
                        mingArmy2.style.top = '55%'; mingArmy2.style.left = '35%';
                        enemyArmy.style.top = '45%'; enemyArmy.style.left = '40%'; // å›å¸ˆåŒ—å¹³
                        break;
                    case 3:
                        mingArmy2.style.top = '50%'; mingArmy2.style.left = '45%';
                        enemyArmy.style.top = '48%'; enemyArmy.style.left = '48%'; // é€¼è¿‘çœŸå®š
                        // æ˜¾ç¤ºæ›´å¤šå†›é˜Ÿ
                        if (!document.getElementById('yanArmy1')) {
                            const yanArmy1 = document.createElement('div');
                            yanArmy1.className = 'army enemy-army';
                            yanArmy1.id = 'yanArmy1';
                            yanArmy1.textContent = 'å¼ ';
                            yanArmy1.style.top = '42%';
                            yanArmy1.style.left = '52%';
                            document.getElementById('battleMap').appendChild(yanArmy1);
                            
                            const yanArmy2 = document.createElement('div');
                            yanArmy2.className = 'army enemy-army';
                            yanArmy2.id = 'yanArmy2';
                            yanArmy2.textContent = 'æœ±';
                            yanArmy2.style.top = '55%';
                            yanArmy2.style.left = '55%';
                            document.getElementById('battleMap').appendChild(yanArmy2);
                        }
                        break;
                    case 4:
                        mingArmy2.style.top = '70%'; mingArmy2.style.left = '30%'; // è´¥é€€
                        enemyArmy.style.top = '40%'; enemyArmy.style.left = '50%'; // æ§åˆ¶åŒ—å¹³
                        document.getElementById('yanArmy1').style.top = '38%';
                        document.getElementById('yanArmy1').style.left = '50%';
                        document.getElementById('yanArmy2').style.top = '45%';
                        document.getElementById('yanArmy2').style.left = '52%';
                        break;
                }
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                prevBtn.disabled = currentStep === 0;
                nextBtn.disabled = currentStep === battleSteps.length - 1;
                
                // æ›´æ–°æ’­æ”¾æŒ‰é’®å›¾æ ‡
                if (autoPlayInterval && currentStep < battleSteps.length - 1) {
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> æš‚åœæ¨æ¼”';
                } else {
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i> æ’­æ”¾æ¨æ¼”';
                }
            }
            
            // ä¸Šä¸€æ­¥
            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    updateBattleStep();
                }
            });
            
            // ä¸‹ä¸€æ­¥
            nextBtn.addEventListener('click', () => {
                if (currentStep < battleSteps.length - 1) {
                    currentStep++;
                    updateBattleStep();
                }
            });
            
            // æ’­æ”¾/æš‚åœ
            playPauseBtn.addEventListener('click', () => {
                if (autoPlayInterval) {
                    clearInterval(autoPlayInterval);
                    autoPlayInterval = null;
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i> æ’­æ”¾æ¨æ¼”';
                } else if (currentStep < battleSteps.length - 1) {
                    autoPlayInterval = setInterval(() => {
                        if (currentStep < battleSteps.length - 1) {
                            currentStep++;
                            updateBattleStep();
                        } else {
                            clearInterval(autoPlayInterval);
                            autoPlayInterval = null;
                            playPauseBtn.innerHTML = '<i class="fas fa-play"></i> æ’­æ”¾æ¨æ¼”';
                        }
                    }, 2500);
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i> æš‚åœæ¨æ¼”';
                }
            });
            
            // é‡ç½®åœ°å›¾
            resetBtn.addEventListener('click', () => {
                clearInterval(autoPlayInterval);
                autoPlayInterval = null;
                currentStep = 0;
                // æ¢å¤åˆå§‹å†›é˜Ÿä½ç½®
                const mingArmy1 = document.getElementById('mingArmy1');
                const mingArmy2 = document.getElementById('mingArmy2');
                const enemyArmy = document.getElementById('enemyArmy');
                mingArmy1.style.display = 'block';
                mingArmy1.style.top = '60%'; mingArmy1.style.left = '20%';
                mingArmy2.style.top = '65%'; mingArmy2.style.left = '25%';
                enemyArmy.style.top = '40%'; enemyArmy.style.left = '70%';
                
                // ç§»é™¤åŠ¨æ€æ·»åŠ çš„å†›é˜Ÿ
                const yanArmy1 = document.getElementById('yanArmy1');
                const yanArmy2 = document.getElementById('yanArmy2');
                if (yanArmy1) yanArmy1.remove();
                if (yanArmy2) yanArmy2.remove();
                
                updateBattleStep();
            });
            
            // æ£€ç´¢åŠŸèƒ½
            const searchInput = document.getElementById('searchInput');
            searchInput.addEventListener('input', function() {
                const keyword = this.value.trim().toLowerCase();
                if (keyword.length < 2) {
                    document.getElementById('searchResults').style.display = 'block';
                    return;
                }
                
                // æ¨¡æ‹Ÿæœç´¢ç»“æœï¼ˆå®é™…é¡¹ç›®åº”è¿æ¥åç«¯APIï¼‰
                const results = [
                    {type: 'emperor', title: 'æœ±å…ƒç’‹', content: 'æ˜æœå¼€å›½çš‡å¸ï¼ˆ1368-1398å¹´åœ¨ä½ï¼‰ï¼Œå¹´å·æ´ªæ­¦ã€‚ä»ä¹ä¸åˆ°çš‡å¸çš„ä¼ å¥‡äººç‰©...'},
                    {type: 'battle', title: 'é–éš¾ä¹‹å½¹', content: '1399-1402å¹´ï¼Œç‡•ç‹æœ±æ££åæŠ—å»ºæ–‡å¸çš„æˆ˜äº‰ï¼Œæœ€ç»ˆæœ±æ££æ”»å…¥å—äº¬å¤ºå–çš‡ä½...'},
                    {type: 'figure', title: 'äºè°¦', content: 'æ˜æœåè‡£ï¼ŒåŒ—äº¬ä¿å«æˆ˜æŒ‡æŒ¥è€…ã€‚åœŸæœ¨å ¡ä¹‹å˜ååŠ›æŒ½ç‹‚æ¾œï¼Œåè¢«æ˜è‹±å®—å¤„æ­»...'},
                    {type: 'event', title: 'éƒ‘å’Œä¸‹è¥¿æ´‹', content: '1405-1433å¹´ï¼Œéƒ‘å’Œä¸ƒæ¬¡ç‡é¢†åºå¤§èˆ¹é˜Ÿè¿œèˆªï¼Œæœ€è¿œåˆ°è¾¾ä¸œéï¼Œä¿ƒè¿›ä¸­å¤–äº¤æµ...'},
                    {type: 'book', title: 'ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹', content: 'å½“å¹´æ˜æœˆæ‰€è‘—ï¼Œä»¥å¹½é»˜ç¬”æ³•è®²è¿°æ˜æœ276å¹´å†å²ï¼Œé”€é‡è¶…åƒä¸‡å†Œ...'}
                ];
                
                const filtered = results.filter(item => 
                    item.title.toLowerCase().includes(keyword) || 
                    item.content.toLowerCase().includes(keyword)
                );
                
                displaySearchResults(filtered, keyword);
            });
            
            // å¿«æ·æœç´¢
            window.quickSearch = function(keyword) {
                searchInput.value = keyword;
                const results = [
                    {type: 'battle', title: 'é–éš¾ä¹‹å½¹', content: '1399-1402å¹´ï¼Œç‡•ç‹æœ±æ££èµ·å…µåæŠ—å»ºæ–‡å¸ï¼Œå†æ—¶å››å¹´æ”»å…¥å—äº¬å¤ºå–çš‡ä½ã€‚æ­¤æˆ˜æ”¹å˜æ˜æœæ”¿æ²»æ ¼å±€ï¼Œå¼€å¯æ°¸ä¹ç››ä¸–ã€‚'},
                    {type: 'battle', title: 'åœŸæœ¨å ¡ä¹‹å˜', content: '1449å¹´ï¼Œæ˜è‹±å®—æœ±ç¥é•‡äº²å¾ç“¦å‰Œï¼Œåœ¨åœŸæœ¨å ¡é­å›´æ­¼è¢«ä¿˜ã€‚æ­¤å½¹å¯¼è‡´æ˜æœç²¾é”å°½å¤±ï¼Œäº¬åŸå±æ®†ï¼Œåç”±äºè°¦ç»„ç»‡åŒ—äº¬ä¿å«æˆ˜åŒ–è§£å±æœºã€‚'},
                    {type: 'event', title: 'éƒ‘å’Œä¸‹è¥¿æ´‹', content: '1405-1433å¹´ï¼Œéƒ‘å’Œä¸ƒæ¬¡ç‡é¢†åºå¤§èˆ¹é˜Ÿè¿œèˆªè¥¿æ´‹ï¼Œæ‹œè®¿30å¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œæœ€è¿œåˆ°è¾¾ä¸œéã€‚ä¿ƒè¿›æµ·ä¸Šä¸ç»¸ä¹‹è·¯ç¹è£ï¼Œå±•ç°æ˜æœå›½å¨ã€‚'},
                    {type: 'figure', title: 'å¼ å±…æ­£', content: 'æ˜æœæ”¿æ²»å®¶ï¼Œä¸‡å†é¦–è¾…ã€‚æ¨è¡Œ"ä¸€æ¡é­æ³•"ç­‰æ”¹é©ï¼Œå¼€åˆ›ä¸‡å†ä¸­å…´ã€‚æ­»åé­æŠ„å®¶æ¸…ç®—ï¼Œä½†æ”¹é©å½±å“æ·±è¿œã€‚'},
                    {type: 'figure', title: 'æˆšç»§å…‰', content: 'æ˜æœæŠ—å€­åå°†ï¼Œåˆ›å»ºæˆšå®¶å†›ã€‚åœ¨ä¸œå—æ²¿æµ·æŠ—å‡»å€­å¯‡åä½™å¹´ï¼Œä¿å«æµ·ç–†ã€‚åè°ƒä»»è“Ÿå·é˜²å¾¡è’™å¤ï¼Œè‘—æœ‰ã€Šçºªæ•ˆæ–°ä¹¦ã€‹ã€‚'},
                    {type: 'group', title: 'ä¸œæ—å…š', content: 'æ˜æœæ™šæœŸæ”¿æ²»é›†å›¢ï¼Œä»¥æ±Ÿå—å£«å¤§å¤«ä¸ºä¸»ã€‚ä¸»å¼ å¼€æ”¾è¨€è·¯ã€æ”¹è‰¯æœæ”¿ï¼Œä¸é˜‰å…šæ¿€çƒˆæ–—äº‰ï¼Œå½±å“æ˜æœ«æ”¿æ²»æ ¼å±€ã€‚'},
                    {type: 'institution', title: 'é”¦è¡£å«', content: 'æ˜æœç‰¹åŠ¡æœºæ„ï¼ŒæŒç®¡çš‡å¸ä¾å«ã€ç¼‰æ•ã€åˆ‘ç‹±ã€‚æ˜å¤ªç¥–è®¾ç«‹ï¼Œæ˜æˆç¥–å¼ºåŒ–ï¼Œæˆä¸ºç»´æŠ¤çš‡æƒçš„é‡è¦å·¥å…·ï¼ŒåæœŸä¸ä¸œå‚å¹¶ç«‹ã€‚'},
                    {type: 'policy', title: 'ä¸€æ¡é­æ³•', content: 'å¼ å±…æ­£æ”¹é©æ ¸å¿ƒå†…å®¹ï¼Œå°†ç”°èµ‹ã€å¾­å½¹ç­‰åˆå¹¶å¾æ”¶é“¶ä¸¤ï¼ŒæŒ‰äº©æŠ˜ç®—ã€‚ç®€åŒ–ç¨åˆ¶ï¼Œå¢åŠ è´¢æ”¿æ”¶å…¥ï¼Œä¿ƒè¿›å•†å“ç»æµå‘å±•ã€‚'}
                ].filter(item => item.title === keyword);
                
                displaySearchResults(results, keyword);
            };
            
            // æ˜¾ç¤ºæœç´¢ç»“æœ
            function displaySearchResults(results, keyword) {
                const resultsContainer = document.getElementById('searchResults');
                if (results.length === 0) {
                    resultsContainer.innerHTML = `<div class="no-results">æœªæ‰¾åˆ°ä¸"${keyword}"ç›¸å…³çš„å†…å®¹</div>`;
                    resultsContainer.style.display = 'block';
                    return;
                }
                
                let html = '';
                results.forEach(item => {
                    html += `
                    <div class="result-card">
                        <div class="result-title">
                            <span class="result-type ${item.type}"><i class="fas ${getIconForType(item.type)}"></i> ${getTypeName(item.type)}</span>
                            ${item.title}
                        </div>
                        <p class="result-content">${highlightKeyword(item.content, keyword)}</p>
                    </div>
                    `;
                });
                
                resultsContainer.innerHTML = html;
                resultsContainer.style.display = 'block';
            }
            
            // è·å–ç±»å‹å›¾æ ‡
            function getIconForType(type) {
                const icons = {
                    emperor: 'fa-crown',
                    battle: 'fa-crosshairs',
                    figure: 'fa-user',
                    event: 'fa-calendar',
                    book: 'fa-book',
                    group: 'fa-users',
                    institution: 'fa-building',
                    policy: 'fa-file-contract'
                };
                return icons[type] || 'fa-info-circle';
            }
            
            // è·å–ç±»å‹åç§°
            function getTypeName(type) {
                const names = {
                    emperor: 'çš‡å¸',
                    battle: 'æˆ˜å½¹',
                    figure: 'äººç‰©',
                    event: 'äº‹ä»¶',
                    book: 'ä¹¦ç±',
                    group: 'é›†å›¢',
                    institution: 'æœºæ„',
                    policy: 'æ”¿ç­–'
                };
                return names[type] || 'å…¶ä»–';
            }
            
            // å®‰å…¨é«˜äº®ï¼šè½¬ä¹‰æ­£åˆ™ç‰¹æ®Šå­—ç¬¦ + ä¿ç•™HTMLç»“æ„
            function highlightKeyword(text, keyword) {
                if (!keyword || keyword.length < 2) return text;
                try {
                    const cleanKeyword = keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const regex = new RegExp(`(${cleanKeyword})`, 'gi');
                    return text.replace(regex, '<mark class="search-highlight">$1</mark>');
                } catch (e) {
                    return text; // å‡ºé”™æ—¶è¿”å›åŸæ–‡
                }
            }
            
            // äººç‰©å…³ç³»å›¾ï¼ˆç®€åŒ–ç‰ˆï¼‰
            setTimeout(() => {
                const chartEl = document.getElementById('relationship-chart');
                chartEl.innerHTML = `
                <div style="background: white; border-radius: 10px; padding: 25px; box-shadow: var(--shadow); text-align: center;">
                    <div style="display: flex; justify-content: center; flex-wrap: wrap; gap: 30px; max-width: 800px; margin: 0 auto;">
                        <div class="relationship-node emperor" onclick="openEmperorModal('æœ±å…ƒç’‹', 'æ˜å¤ªç¥–', '1368-1398', 'æ´ªæ­¦', 'æ˜æœå¼€å›½çš‡å¸...', 'é©±é€èƒ¡è™ï¼Œæ¢å¤ä¸­å', '1328-1398', 'å®‰å¾½å‡¤é˜³', 'é©¬çš‡å', 'è¯›æ€åŠŸè‡£ï¼Œè®¾ç«‹é”¦è¡£å«')">æœ±å…ƒç’‹</div>
                        <div class="relationship-node figure" onclick="document.querySelector('#figures .section-title').scrollIntoView({behavior:'smooth'})">å¾è¾¾</div>
                        <div class="relationship-node figure" onclick="document.querySelector('#figures .section-title').scrollIntoView({behavior:'smooth'})">åˆ˜ä¼¯æ¸©</div>
                        <div class="relationship-node emperor" onclick="openEmperorModal('æœ±æ££', 'æ˜æˆç¥–', '1402-1424', 'æ°¸ä¹', 'æœ±å…ƒç’‹ç¬¬å››å­...', 'å¤©å‘½æœ‰å½’', '1360-1424', 'å—äº¬', 'å¾çš‡å', 'è¿éƒ½åŒ—äº¬ã€éƒ‘å’Œä¸‹è¥¿æ´‹')">æœ±æ££</div>
                        <div class="relationship-node figure" onclick="document.querySelector('#figures .section-title').scrollIntoView({behavior:'smooth'})">éƒ‘å’Œ</div>
                        <div class="relationship-node figure" onclick="document.querySelector('#figures .section-title').scrollIntoView({behavior:'smooth'})">äºè°¦</div>
                        <div class="relationship-node emperor" onclick="openEmperorModal('æœ±ç”±æ£€', 'æ˜æ€å®—', '1627-1644', 'å´‡ç¥¯', 'æ˜æœæœ«ä»£çš‡å¸...', 'æœ•éäº¡å›½ä¹‹å›', '1611-1644', 'åŒ—äº¬', 'å‘¨çš‡å', 'è‡ªç¼¢ç…¤å±±')">æœ±ç”±æ£€</div>
                    </div>
                    <div style="margin-top: 25px; color: #6c757d; font-size: 0.9rem;">
                        <p>ğŸ’¡ <strong>æç¤ºï¼š</strong>ç‚¹å‡»äººç‰©èŠ‚ç‚¹æŸ¥çœ‹è¯¦æƒ…ï¼Œçº¿æ¡è¡¨ç¤ºå†å²å…³è”ï¼ˆå›è‡£ã€äº²å±ã€æ•Œå¯¹ç­‰ï¼‰</p>
                        <p style="margin-top: 8px;">æœ¬å›¾å±•ç¤ºéƒ¨åˆ†å…³é”®äººç‰©å…³ç³»ï¼Œå®Œæ•´å…³ç³»ç½‘åŒ…å«100+å†å²äººç‰©</p>
                    </div>
                </div>
                `;
            }, 300);
            
            // è¿”å›é¡¶éƒ¨æŒ‰é’®
            const backToTopBtn = document.createElement('button');
            backToTopBtn.className = 'back-to-top';
            backToTopBtn.innerHTML = '<i class="fas fa-arrow-up"></i>';
            backToTopBtn.onclick = () => window.scrollTo({top: 0, behavior: 'smooth'});
            document.body.appendChild(backToTopBtn);
            
            window.addEventListener('scroll', () => {
                backToTopBtn.style.display = (window.pageYOffset > 300) ? 'block' : 'none';
            });
            
            // åˆå§‹åŒ–æ—¶éšè—æœç´¢ç»“æœï¼ˆé™¤ç¤ºä¾‹å¤–ï¼‰
            setTimeout(() => {
                document.getElementById('searchResults').style.opacity = '0.98'; // è§¦å‘CSSè¿‡æ¸¡
            }, 100);
        });
    </script>
</body>
</html>
